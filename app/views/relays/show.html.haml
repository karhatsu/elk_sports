- content_for :title, "#{@relay.race.name} - #{t('activerecord.models.relay', :count => 2)} - #{@relay.name} - #{relay_result_title(@relay)}"
- if @relay.active?
  = render :partial => 'shared/refresh_counter', locals: {competition: @relay}
%h2 #{@relay.name} - #{relay_result_title(@relay)}
- content_for :sub_sub_menu do
  = render layout: 'menus/relays_sub_menu', locals: { race: @relay.race, relay_id: @relay.id } do |relay|
    - race_relay_path(relay.race, relay)
- if @results.empty?
  .message.message--info= t '.relay_has_no_teams'
- elsif !@relay.start_time
  .message.message--info= t '.relay_has_no_start_time'
- else
  = render 'start_time_info'
  = render 'penalty_seconds_info'
  = render 'correct_estimates'
  = render 'results_title'
  = render 'leg_links'
  .buttons
    %a#show_all_relay_competitors.button{href: 'javascript:void(0)'}= t :show_all_competitors
    %a#hide_all_relay_competitors.button{href: 'javascript:void(0)', style: 'display:none;'}= t :hide_all_competitors
  - cache [@relay, I18n.locale] do
    .results--desktop= render partial: 'results', locals: { relay: @relay, pdf: false }
    .results--mobile= render partial: 'results_mobile', locals: { relay: @relay, pdf: false }
.buttons
  - unless @results.empty? || !@relay.start_time
    = link_to t('.download_start_list_pdf'), race_relay_start_list_path(@relay.race, @relay, format: :pdf), class: 'button button--pdf'
    = link_to t(:download_results_pdf_without_competitors), race_relay_path(@relay.race, @relay, exclude_competitors: true, format: 'pdf'), class: 'button button--pdf'
    = link_to t(:download_results_pdf_with_competitors), race_relay_path(@relay.race, @relay, format: 'pdf'), class: 'button button--pdf'
= render layout: 'menus/relays_sub_menu', locals: { race: @relay.race, relay_id: @relay.id, mobile: true } do |relay|
  - race_relay_path(relay.race, relay)
.buttons.buttons--nav
  = link_to "#{t(:back_to_page)} #{@race.name}", race_path(@relay.race), class: 'button button--back'
:javascript
  function showAllCompetitors() {
    $('.competitor_row').show();
    $('#show_all_relay_competitors').hide();
    $('#hide_all_relay_competitors').show();
    window.location.hash = 'competitors'
  }
  function hideAllCompetitors() {
    $('.competitor_row').hide();
    $('#show_all_relay_competitors').show();
    $('#hide_all_relay_competitors').hide();
    history.pushState(null, null, ' ')
  }
  $('#show_all_relay_competitors').click(function() {
    showAllCompetitors();
  });
  $('#hide_all_relay_competitors').click(function() {
    hideAllCompetitors();
  });
  $(document).ready(function() {
    if(window.location.hash == '#competitors') {
      showAllCompetitors();
    }
  });
